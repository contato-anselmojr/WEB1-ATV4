// =============================== // VALIDAÇÃO DE FORMULÁRIOS (WCAG + ERROS VISUAIS) // =============================== document.addEventListener("DOMContentLoaded", () => { const form = document.querySelector("form"); if (!form) return; const inputs = form.querySelectorAll("input[required]"); // Mensagens de erro acessíveis inputs.forEach(input => { input.addEventListener("invalid", (e) => { e.preventDefault(); mostrarErro(input); }); input.addEventListener("input", () => { limparErro(input); }); }); }); // Mostra erro (com aria-live) function mostrarErro(campo) { limparErro(campo); // evita duplicar const msg = document.createElement("p"); msg.classList.add("erro-campo"); msg.setAttribute("role", "alert"); msg.style.color = "red"; msg.style.fontSize = "0.9rem"; msg.style.marginTop = "5px"; msg.innerText = campo.validationMessage; campo.insertAdjacentElement("afterend", msg); campo.classList.add("input-invalido"); } // Remove erro function limparErro(campo) { campo.classList.remove("input-invalido"); const erro = campo.parentNode.querySelector(".erro-campo"); if (erro) erro.remove(); }